function toRad(e){return e*Math.PI/180}var homeLocation={get:function(){var e={};e.lat=localStorage.getItem("lat");e.lon=localStorage.getItem("lon");return e},set:function(e,t){localStorage.setItem("lat",e);localStorage.setItem("lon",t)}},locationPage={getLocation:function(){console.log("locationPage.getLocation Fired");navigator.geolocation.getCurrentPosition(this.getLocationSuccess,this.getError)},getLocationSuccess:function(e){console.log("locationPage.getLocationSuccess Fired");$("#lat").html(e.coords.latitude);$("#lon").html(e.coords.longitude);console.log(this);locationPage.doReverseLookup(e)},getError:function(e){console.log("getError Fired");console.log(e)},doReverseLookup:function(e){console.log("locationPage.doReverseLookup Fired");var t=e.coords.latitude+","+e.coords.longitude;$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?sensor=false&latlng="+t,success:locationPage.doReverseLookupSuccess})},doReverseLookupSuccess:function(e){console.log("locationPage.doReverseLookupSuccess Fired");console.log(e);var t=e.results[0];$("#address").html(t.formatted_address)}},distancePage={setDistanceReadout:function(e,t){$("#d_km").html(e);$("#d_miles").html(t)},setDevicePosition:function(e,t){$("#lat-device").html(e);$("#lon-device").html(t)}},distanceModule={getLocation:function(){navigator.geolocation.getCurrentPosition(distanceModule.getLocationSuccess,distanceModule.getLocationError);console.log("getLocation Fired")},getLocationError:function(e){console.log("getLocationError Fired");console.log(e)},getLocationSuccess:function(e){var t=e.coords.latitude,n=e.coords.longitude,r=homeLocation.get(),i=r.lat,s=r.lon;distancePage.setDevicePosition(t,n);console.log("lat_device:",t);console.log("lon_device:",n);console.log("lat_home:",i);console.log("lon_home:",s);var o=Math.round(distanceModule.calcDistanceBetween(t,n,i,s)),u=Math.round(distanceModule.calcDistanceBetween(t,n,i,s,"miles"));distancePage.setDistanceReadout(o,u)},calcDistanceBetween:function(e,t,n,r,i){typeof i=="undefined"&&(i="km");var s=6371;i==="miles"&&(s=3958.7558657440545);var o=toRad(n-e),u=toRad(r-t),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(toRad(e))*Math.cos(toRad(n))*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=s*f;return l}};